# API test fraemwork

Шаблон для написания API автотестов

## Предварительные требования
Установить: Node.js, Git

## Быстрый старт
Откройте терминал. Перейдите в каталог, в который хотите склонировать репозиторий 

    $ cd example/catalog

Клонируйте репозиторий в текущий каталог

    $ git clone https://github.com/shark-x/api

Установите все зависимости указанные в package.json

    $ npm i
    $ npm install jest --global  

Запустите первый тест 

    $ npm test fisrt.test

![Картинка не загрузилась](/img/result1.png "Результат запуска")

> Чтобы запустить скрипт, находящийся в файле package.json нужно запустить команду **npm run {название скрипта}**
> Команда **npm test** аналогична команде **npm run test**, это сделано специально ТОЛЬКО для скрипта с названием test, другие скрипты нужно запускать использую оператор run

Запустите первый api тест 

    $ npm test fisrt.api.test

![Картинка не загрузилась](/img/result2.png "Результат запуска")

Запустите все тесты

    $ npm test

![Картинка не загрузилась](/img/result3.png "Результат запуска")

## Пишем второй api тест

Создайте в проекте файл second.api.test.js

Импортируйте библиотеку supertest - для возможности отправки запросов серверу

    const request = require('supertest')

Импортируйте метод assert из библиотеки chai для возможности сравнения фактического и ожидаемого результата

    const assert = require('chai').assert

Напишите синтаксическую констукцию для тестов (jest использует синтаксис mocha для написания тестов, поэтому ее можно не устанавливать в проект)

    <describe('Название тестового набора', function(){

        it('Название тест-кейса', async function(){

                
        })
    })>

Внутри it конструкции напишите свой api тест проверяющий статус код API. 

        const response = await request('Домен')  
            .get('endpoint')
            .query({'Параметры, которые принимает API'})

        assert.equal(response.statusCode, 200)

Запустите ваш тест

    $ npm run second.api.test
